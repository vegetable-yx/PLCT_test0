+ source ./common/common.sh
++ source ../common/common_lib.sh
+++ source /root/GitRepo/mugen-riscv/libs/locallibs/common_lib.sh
++++ python3 --version
++++ '[' 0 -eq 0 ']'
++++ source /root/GitRepo/mugen-riscv/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start environmental preparation.'
+ message='Start environmental preparation.'
+ python3 /root/GitRepo/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
Fri Feb  3 01:07:40 2023 - INFO  - Start environmental preparation.
+ conf_common
+ pkg_path=/opt/cfssl.tar.gz
+ cfssl_path=/opt/cfssl
+++ dirname oe_test_service_kube-scheduler.sh
++ cd .
++ pwd
+ current_path=/root/GitRepo/mugen-riscv/testcases/cli-test/kubernetes
+ cert_path=/etc/kubernetes/pki
+ mkdir -p /opt/cfssl /etc/kubernetes/pki
++ hostname
+ host_name=k8snode1
+ name_host=k8snode1
+ hostname
+ grep -i k8snode1
k8snode1
+ kubernetes_install
+ DNF_INSTALL 'docker conntrack-tools socat kubernetes*' 1
+ pkgs='docker conntrack-tools socat kubernetes*'
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/GitRepo/mugen-riscv/libs/locallibs/rpm_manage.py install --pkgs 'docker conntrack-tools socat kubernetes*' --node 1 --tempfile ''
Fri Feb  3 01:08:48 2023 - INFO  - pkgs:(docker conntrack-tools socat kubernetes*) is already installed
+ tmpfile2=
+ '[' -z '' ']'
+ tmpfile=
+ certificate_prepare
+ wget --no-check-certificate https://github.com/cloudflare/cfssl/archive/v1.5.0.tar.gz -O /opt/cfssl.tar.gz
--2023-02-03 01:08:50--  https://github.com/cloudflare/cfssl/archive/v1.5.0.tar.gz
Resolving github.com (github.com)... 20.205.243.166
Connecting to github.com (github.com)|20.205.243.166|:443... connected.
GnuTLS: Error in the pull function.
Unable to establish SSL connection.
+ test -f /opt/cfssl.tar.gz
+ which tar
/usr/bin/tar
+ tar -zxvf /opt/cfssl.tar.gz -C /opt/cfssl --strip-components=1

gzip: stdin: unexpected end of file
tar: Child returned status 1
tar: Error is not recoverable: exiting now
+ which golang
which: no golang in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)
+ DNF_INSTALL golang 1
+ pkgs=golang
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/GitRepo/mugen-riscv/libs/locallibs/rpm_manage.py install --pkgs golang --node 1 --tempfile ''
+ tmpfile2='Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.
Dependencies resolved.
================================================================================
 Package               Architecture Version                 Repository     Size
================================================================================
Installing:
 golang                riscv64      1.17.3-3.oe2203         mainline       94 M
Installing dependencies:
 apr                   riscv64      1.7.0-4.oe2203          mainline      105 k
 apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k
 golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M
 httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M
 httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k
 httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k
 libserf               riscv64      1.3.9-13.oe2203         mainline       53 k
 mailcap               noarch       2.1.53-1.oe2203         mainline       34 k
 mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k
 openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M
 subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M
 utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k

Transaction Summary
================================================================================
Install  13 Packages

Total size: 124 M
Installed size: 476 M
Downloading Packages:
[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   
[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             
[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               
[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                
[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      
[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          
[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              
[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               
[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 7941 to finish.
Transaction check succeeded.
Running transaction test
Error: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '\''/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'\''
TypeError: an integer is required (got type NoneType)
FATAL ERROR: python callback ??? failed, aborting!'
+ '[' -z '' ']'
+ tmpfile='Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.
Dependencies resolved.
================================================================================
 Package               Architecture Version                 Repository     Size
================================================================================
Installing:
 golang                riscv64      1.17.3-3.oe2203         mainline       94 M
Installing dependencies:
 apr                   riscv64      1.7.0-4.oe2203          mainline      105 k
 apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k
 golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M
 httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M
 httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k
 httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k
 libserf               riscv64      1.3.9-13.oe2203         mainline       53 k
 mailcap               noarch       2.1.53-1.oe2203         mainline       34 k
 mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k
 openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M
 subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M
 utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k

Transaction Summary
================================================================================
Install  13 Packages

Total size: 124 M
Installed size: 476 M
Downloading Packages:
[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   
[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             
[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               
[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                
[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      
[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          
[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              
[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               
[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 7941 to finish.
Transaction check succeeded.
Running transaction test
Error: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '\''/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'\''
TypeError: an integer is required (got type NoneType)
FATAL ERROR: python callback ??? failed, aborting!'
+ cd /opt/cfssl
+ make -j6
fatal: not a git repository (or any of the parent directories): .git
go build -o bin/rice ./vendor/github.com/GeertJohan/go.rice/rice
go tool: no such tool "compile"
go tool: no such tool "compile"
go tool: no such tool "compile"
make: *** [Makefile:32: bin/rice] Error 2
+ cp 'bin/cfssl*' /usr/local/bin/
cp: cannot stat 'bin/cfssl*': No such file or directory
+ cd /etc/kubernetes/pki
+ echo '{
    "signing": {
      "default": {
        "expiry": "8760h"
      },
      "profiles": {
        "kubernetes": {
          "usages": [
            "signing",
            "key encipherment",
            "server auth",
            "client auth"
          ],
          "expiry": "8760h"
        }
      }
    }
  }'
+ echo '{
    "CN": "Kubernetes",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "openEuler",
        "OU": "WWW",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -initca ca-csr.json
+ cfssljson -bare ca
./common/common.sh: line 87: cfssljson: command not found
./common/common.sh: line 87: cfssl: command not found
+ echo '{
    "CN": "admin",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:masters",
        "OU": "Containerum",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssljson -bare admin
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes admin-csr.json
./common/common.sh: line 104: cfssljson: command not found
./common/common.sh: line 104: cfssl: command not found
+ echo '{
    "CN": "service-accounts",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "Kubernetes",
        "OU": "openEuler k8s install",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes service-account-csr.json
./common/common.sh: line 121: cfssl: command not found
+ cfssljson -bare service-account
./common/common.sh: line 122: cfssljson: command not found
+ echo '{
    "CN": "system:kube-controller-manager",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:kube-controller-manager",
        "OU": "openEuler k8s kcm",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssljson -bare kube-controller-manager
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-controller-manager-csr.json
./common/common.sh: line 140: cfssljson: command not found
./common/common.sh: line 139: cfssl: command not found
+ echo '{
    "CN": "system:kube-proxy",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:node-proxier",
        "OU": "openEuler k8s kube proxy",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-proxy-csr.json
./common/common.sh: line 157: cfssl: command not found
+ cfssljson -bare kube-proxy
./common/common.sh: line 158: cfssljson: command not found
+ echo '{
    "CN": "system:kube-scheduler",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:kube-scheduler",
        "OU": "openEuler k8s kube scheduler",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=kubernetes kube-scheduler-csr.json
+ cfssljson -bare kube-scheduler
./common/common.sh: line 175: cfssl: command not found
./common/common.sh: line 176: cfssljson: command not found
+ echo '{
    "CN": "system:node:k8snode1",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "system:nodes",
        "OU": "openEuler k8s kubelet",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=k8snode1,127.0.0.1 -profile=kubernetes k8snode1-csr.json
./common/common.sh: line 194: cfssl: command not found
+ cfssljson -bare k8snode1
./common/common.sh: line 195: cfssljson: command not found
+ echo '{
    "CN": "kubernetes",
    "key": {
      "algo": "rsa",
      "size": 2048
    },
    "names": [
      {
        "C": "CN",
        "L": "HangZhou",
        "O": "Kubernetes",
        "OU": "openEuler k8s kube api server",
        "ST": "BinJiang"
      }
    ]
  }'
+ cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -hostname=10.32.0.1,127.0.0.1,kubernetes,kubernetes.default,kubernetes.default.svc,kubernetes.default.svc.cluster,kubernetes.svc.cluster.local -profile=kubernetes kubernetes-csr.json
./common/common.sh: line 212: cfssl: command not found
+ cfssljson -bare kubernetes
./common/common.sh: line 213: cfssljson: command not found
+ cd /root/GitRepo/mugen-riscv/testcases/cli-test/kubernetes
+ etcd_install
+ DNF_INSTALL etcd
+ pkgs=etcd
+ node=1
+ '[' -z 'Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.
Dependencies resolved.
================================================================================
 Package               Architecture Version                 Repository     Size
================================================================================
Installing:
 golang                riscv64      1.17.3-3.oe2203         mainline       94 M
Installing dependencies:
 apr                   riscv64      1.7.0-4.oe2203          mainline      105 k
 apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k
 golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M
 httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M
 httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k
 httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k
 libserf               riscv64      1.3.9-13.oe2203         mainline       53 k
 mailcap               noarch       2.1.53-1.oe2203         mainline       34 k
 mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k
 openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M
 subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M
 utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k

Transaction Summary
================================================================================
Install  13 Packages

Total size: 124 M
Installed size: 476 M
Downloading Packages:
[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   
[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             
[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               
[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                
[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      
[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          
[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              
[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               
[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 7941 to finish.
Transaction check succeeded.
Running transaction test
Error: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '\''/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'\''
TypeError: an integer is required (got type NoneType)
FATAL ERROR: python callback ??? failed, aborting!' ']'
++ python3 /root/GitRepo/mugen-riscv/libs/locallibs/rpm_manage.py install --pkgs etcd --node 1 --tempfile 'Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.
Dependencies resolved.
================================================================================
 Package               Architecture Version                 Repository     Size
================================================================================
Installing:
 golang                riscv64      1.17.3-3.oe2203         mainline       94 M
Installing dependencies:
 apr                   riscv64      1.7.0-4.oe2203          mainline      105 k
 apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k
 golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M
 httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M
 httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k
 httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k
 libserf               riscv64      1.3.9-13.oe2203         mainline       53 k
 mailcap               noarch       2.1.53-1.oe2203         mainline       34 k
 mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k
 openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M
 subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M
 utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k

Transaction Summary
================================================================================
Install  13 Packages

Total size: 124 M
Installed size: 476 M
Downloading Packages:
[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   
[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             
[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               
[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                
[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      
[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          
[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              
[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               
[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 7941 to finish.
Transaction check succeeded.
Running transaction test
Error: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '\''/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'\''
TypeError: an integer is required (got type NoneType)
FATAL ERROR: python callback ??? failed, aborting!'
Traceback (most recent call last):
  File "/root/GitRepo/mugen-riscv/libs/locallibs/rpm_manage.py", line 176, in <module>
    exitcode, output = rpm_install(args.pkgs, args.node, args.tempfile)
  File "/root/GitRepo/mugen-riscv/libs/locallibs/rpm_manage.py", line 110, in rpm_install
    with open(tmpfile, "a+") as f:
OSError: [Errno 36] File name too long: "Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.\nDependencies resolved.\n================================================================================\n Package               Architecture Version                 Repository     Size\n================================================================================\nInstalling:\n golang                riscv64      1.17.3-3.oe2203         mainline       94 M\nInstalling dependencies:\n apr                   riscv64      1.7.0-4.oe2203          mainline      105 k\n apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k\n golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M\n httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M\n httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k\n httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k\n libserf               riscv64      1.3.9-13.oe2203         mainline       53 k\n mailcap               noarch       2.1.53-1.oe2203         mainline       34 k\n mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k\n openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M\n subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M\n utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k\n\nTransaction Summary\n================================================================================\nInstall  13 Packages\n\nTotal size: 124 M\nInstalled size: 476 M\nDownloading Packages:\n[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   \n[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             \n[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               \n[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          \n[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                \n[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      \n[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          \n[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              \n[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               \n[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           \n[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          \n[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           \n[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              \nRunning transaction check\nWaiting for process with pid 7941 to finish.\nTransaction check succeeded.\nRunning transaction test\nError: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'\nTypeError: an integer is required (got type NoneType)\nFATAL ERROR: python callback ??? failed, aborting!"
+ tmpfile2=
+ '[' -z 'Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.
Dependencies resolved.
================================================================================
 Package               Architecture Version                 Repository     Size
================================================================================
Installing:
 golang                riscv64      1.17.3-3.oe2203         mainline       94 M
Installing dependencies:
 apr                   riscv64      1.7.0-4.oe2203          mainline      105 k
 apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k
 golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M
 httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M
 httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k
 httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k
 libserf               riscv64      1.3.9-13.oe2203         mainline       53 k
 mailcap               noarch       2.1.53-1.oe2203         mainline       34 k
 mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k
 openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M
 subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M
 utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k

Transaction Summary
================================================================================
Install  13 Packages

Total size: 124 M
Installed size: 476 M
Downloading Packages:
[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   
[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             
[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               
[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                
[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      
[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          
[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              
[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               
[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 7941 to finish.
Transaction check succeeded.
Running transaction test
Error: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '\''/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'\''
TypeError: an integer is required (got type NoneType)
FATAL ERROR: python callback ??? failed, aborting!' ']'
+ systemctl start etcd
+ kubeconfig_prepare
+ cd /etc/kubernetes/pki
./common/common.sh: line 223: cd: /etc/kubernetes/pki: No such file or directory
+ exit
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/GitRepo/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
Fri Feb  3 01:34:16 2023 - INFO  - start environment cleanup.
+ kubernetes_remove
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.
Dependencies resolved.
================================================================================
 Package               Architecture Version                 Repository     Size
================================================================================
Installing:
 golang                riscv64      1.17.3-3.oe2203         mainline       94 M
Installing dependencies:
 apr                   riscv64      1.7.0-4.oe2203          mainline      105 k
 apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k
 golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M
 httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M
 httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k
 httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k
 libserf               riscv64      1.3.9-13.oe2203         mainline       53 k
 mailcap               noarch       2.1.53-1.oe2203         mainline       34 k
 mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k
 openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M
 subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M
 utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k

Transaction Summary
================================================================================
Install  13 Packages

Total size: 124 M
Installed size: 476 M
Downloading Packages:
[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   
[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             
[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               
[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                
[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      
[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          
[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              
[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               
[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 7941 to finish.
Transaction check succeeded.
Running transaction test
Error: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'
TypeError: an integer is required (got type NoneType)
FATAL ERROR: python callback ??? failed, aborting! ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/GitRepo/mugen-riscv/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile 'Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.
Dependencies resolved.
================================================================================
 Package               Architecture Version                 Repository     Size
================================================================================
Installing:
 golang                riscv64      1.17.3-3.oe2203         mainline       94 M
Installing dependencies:
 apr                   riscv64      1.7.0-4.oe2203          mainline      105 k
 apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k
 golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M
 httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M
 httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k
 httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k
 libserf               riscv64      1.3.9-13.oe2203         mainline       53 k
 mailcap               noarch       2.1.53-1.oe2203         mainline       34 k
 mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k
 openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M
 subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M
 utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k

Transaction Summary
================================================================================
Install  13 Packages

Total size: 124 M
Installed size: 476 M
Downloading Packages:
[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   
[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             
[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               
[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                
[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      
[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          
[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              
[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               
[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          
[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           
[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 7941 to finish.
Transaction check succeeded.
Running transaction test
Error: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '\''/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'\''
TypeError: an integer is required (got type NoneType)
FATAL ERROR: python callback ??? failed, aborting!'
Traceback (most recent call last):
  File "/root/GitRepo/mugen-riscv/libs/locallibs/rpm_manage.py", line 181, in <module>
    exitcode = rpm_remove(args.node, args.pkgs, args.tempfile)
  File "/root/GitRepo/mugen-riscv/libs/locallibs/rpm_manage.py", line 152, in rpm_remove
    with open(tmpfile, "r") as f:
OSError: [Errno 36] File name too long: "Last metadata expiration check: 4:40:18 ago on Thu Feb  2 20:31:58 2023.\nDependencies resolved.\n================================================================================\n Package               Architecture Version                 Repository     Size\n================================================================================\nInstalling:\n golang                riscv64      1.17.3-3.oe2203         mainline       94 M\nInstalling dependencies:\n apr                   riscv64      1.7.0-4.oe2203          mainline      105 k\n apr-util              riscv64      1.6.1-12.oe2203         mainline      110 k\n golang-devel          noarch       1.17.3-3.oe2203         mainline       17 M\n httpd                 riscv64      2.4.51-5.oe2203         mainline      1.2 M\n httpd-filesystem      noarch       2.4.51-5.oe2203         mainline       11 k\n httpd-tools           riscv64      2.4.51-5.oe2203         mainline       67 k\n libserf               riscv64      1.3.9-13.oe2203         mainline       53 k\n mailcap               noarch       2.1.53-1.oe2203         mainline       34 k\n mod_http2             riscv64      1.15.25-1.oe2203        mainline      118 k\n openEuler-logos       noarch       1.0-7.oe2203            mainline      8.7 M\n subversion            riscv64      1.14.1-2.oe2203         mainline      2.3 M\n utf8proc              riscv64      2.6.1-3.oe2203          mainline       63 k\n\nTransaction Summary\n================================================================================\nInstall  13 Packages\n\nTotal size: 124 M\nInstalled size: 476 M\nDownloading Packages:\n[SKIPPED] apr-1.7.0-4.oe2203.riscv64.rpm: Already downloaded                   \n[SKIPPED] apr-util-1.6.1-12.oe2203.riscv64.rpm: Already downloaded             \n[SKIPPED] golang-1.17.3-3.oe2203.riscv64.rpm: Already downloaded               \n[SKIPPED] golang-devel-1.17.3-3.oe2203.noarch.rpm: Already downloaded          \n[SKIPPED] httpd-2.4.51-5.oe2203.riscv64.rpm: Already downloaded                \n[SKIPPED] httpd-filesystem-2.4.51-5.oe2203.noarch.rpm: Already downloaded      \n[SKIPPED] httpd-tools-2.4.51-5.oe2203.riscv64.rpm: Already downloaded          \n[SKIPPED] libserf-1.3.9-13.oe2203.riscv64.rpm: Already downloaded              \n[SKIPPED] mailcap-2.1.53-1.oe2203.noarch.rpm: Already downloaded               \n[SKIPPED] mod_http2-1.15.25-1.oe2203.riscv64.rpm: Already downloaded           \n[SKIPPED] openEuler-logos-1.0-7.oe2203.noarch.rpm: Already downloaded          \n[SKIPPED] subversion-1.14.1-2.oe2203.riscv64.rpm: Already downloaded           \n[SKIPPED] utf8proc-2.6.1-3.oe2203.riscv64.rpm: Already downloaded              \nRunning transaction check\nWaiting for process with pid 7941 to finish.\nTransaction check succeeded.\nRunning transaction test\nError: Cannot open file /var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm: [Errno 2] No such file or directory: '/var/cache/dnf/mainline-34f39d904a2a8005/packages/mailcap-2.1.53-1.oe2203.noarch.rpm'\nTypeError: an integer is required (got type NoneType)\nFATAL ERROR: python callback ??? failed, aborting!"
+ '[' 0 -ne 0 ']'
+ rm -rf /etc/kubernetes /opt/cfssl.tar.gz /opt/cfssl '/usr/local/bin/cfssl*'
+ hostnamectl set-hostname k8snode1
+ LOG_INFO 'Finish environment cleanup!'
+ message='Finish environment cleanup!'
+ python3 /root/GitRepo/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Finish environment cleanup!'
Fri Feb  3 01:34:48 2023 - INFO  - Finish environment cleanup!
